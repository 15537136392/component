<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>对话框中的表单验证</title>
  <link href="../lib/pretty/prettify.css" type="text/css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="../css/tablepay.css" media="all">
  <link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
  <link rel="stylesheet" type="text/css" href="../lib/dialog/6.0.4/css/ui-dialog.css">
  <link rel="stylesheet" type="text/css" href="../css/business.css">
  <script src="../lib/jquery/1.8.1/jquery.js"></script>
  <script type="text/javascript" src="../lib/pretty/prettify.js"></script>
  <script src="../lib/datepicker/4.8.b2/WdatePicker.js"></script>
  <script src="../lib/jquery/1.8.1/jquery.js"></script>
  <script src="../lib/validate/1.13.1/jquery.validate.min.js"></script>
  <script src="../lib/dialog/6.0.4/dialog-plus.js"></script>
  <script src="../common/config.js"></script>
  <script src="../common/common.js"></script>



  <script type="text/javascript">
    var _validator = null;
    var _dialog = null;

    $(function(){
      init();
    });

    var init = function(){
      eventInit();
    }

    var eventInit = function(){
      $('#btnOpen').on('click', showDialog);
    }

    var showDialog = function(){
      var params = {
        id : 'd1',    //弹出对话框的id
        title : '提示信息', //左上角提示标题
        content : $('#dialogContent').html(), //具体提示内容
        width : '600',  //对话框宽度
        height : '400'  //对话框高度
      }
      _dialog = Util.dialog.openDiv(params);
      _validator = $('#form3').validate({
        rules: {
          questionnaireName: {
            required: true
          }, 
          date: {
            required: true, 
            date:true
          },
          number:{
            number:true
          }, 

        }, 
        messages:{
          questionnaireName:{
            required:'问卷名称为必填项', 
          },
          date:{
            required:'日期为必填项', 
            date:'日期格式不正确'
          },
          number:{
            number:'数字格式不正确'
          }, 

        }, 
        showErrors:function(errorMap, errorList){
          this.defaultShowErrors();
        }
      });
      $('#save', _dialog.node).on('click', function(){
        if (_validator.form()){
          Util.dialog.tips('验证成功');
        }
        return false;
      });
    }


  </script>
</head>
<body id="main_body" onload="prettyPrint()">
  <div class="ui-standard">
    <H1>对话框中的表单验证</H1>
    <!--<p><strong>示例</strong></p>-->
    <div>

	<div class="ui-normalBtnArea ui-current-1">
		<a class="ui-normalBtn ui-BGblue ui-largeBtn" href="javascript:;" id="btnOpen">打开对话框</a>
	</div>

    </div>
    
    <p><strong>html代码</strong></p>
    <pre class="prettyprint mt-20 fn-clear" id="html">
      &lt;script type="text/template" id="dialogContent">
        &lt;form id="form3" novalidate="novalidate">
          &lt;table class="ui-form-table" width="100%">
            &lt;tbody>
              &lt;tr>
                &lt;td>&lt;label class="ui-formDescription">&lt;span class="fn-high">*&lt;/span> 问卷名称&lt;/label>&lt;/td>
                &lt;td>
                &lt;input type="text" name="questionnaireName" value="" class="ui-FormInputText ui-width314">
                &lt;/td>
              &lt;/tr>
              &lt;tr>
                &lt;td>&lt;label  class="ui-formDescription">&lt;span class="fn-high">*&lt;/span>手输日期&lt;/label>&lt;/td>
                &lt;td>
                &lt;input type="text" name="date" value="" class="ui-FormInputText ui-width314">
                &lt;/td>
              &lt;/tr>
              &lt;tr>
                &lt;td>&lt;label  class="ui-formDescription">&lt;span class="fn-high">*&lt;/span> 数字&lt;/label>&lt;/td>
                &lt;td>
                &lt;input type="text" name="number" value="" class="ui-FormInputText">
                &lt;/td>
              &lt;/tr>
            &lt;/tbody>
            &lt;/table>
            &lt;div class="ui-normalBtnArea ui-current-1">
                &lt;a class="ui-normalBtn ui-BGblue ui-largeBtn" href="javascript:;" id="save">保存&lt;/a>
            &lt;/div>
        &lt;/form>
      &lt;/script>
    </pre>    
    
    <p><strong>js代码</strong></p>
    <pre class="prettyprint mt-20 fn-clear" id="html">
      var _validator = null;
      var _dialog = null;

      $(function(){
        init();
      });

      var init = function(){
        eventInit();
      }

      var eventInit = function(){
        $('#btnOpen').on('click', showDialog);
      }

      var showDialog = function(){
        var params = {
          id : 'd1',    //弹出对话框的id
          title : '提示信息', //左上角提示标题
          content : $('#dialogContent').html(), //具体提示内容
          width : '600',  //对话框宽度
          height : '400'  //对话框高度
        }
        _dialog = Util.dialog.openDiv(params);
        _validator = $('#form3').validate({
          rules: {
            questionnaireName: {
              required: true
            }, 
            date: {
              required: true, 
              date:true
            },
            number:{
              number:true
            }, 

          }, 
          messages:{
            questionnaireName:{
              required:'问卷名称为必填项', 
            },
            date:{
              required:'日期为必填项', 
              date:'日期格式不正确'
            },
            number:{
              number:'数字格式不正确'
            }, 

          }, 
          showErrors:function(errorMap, errorList){
            this.defaultShowErrors();
          }
        });
        $('#save', _dialog.node).on('click', function(){
          if (_validator.form()){
            Util.dialog.tips('验证成功');
          }
          return false;
        });
      }
    </pre>
  </div>

	<script type="text/template" id="dialogContent">
		<form id="form3" novalidate="novalidate">
			<table class="ui-form-table" width="100%">
  			<tbody>
    			<tr>
      			<td><label class="ui-formDescription"><span class="fn-high">*</span> 问卷名称</label></td>
      			<td>
      			<input type="text" name="questionnaireName" value="" class="ui-FormInputText ui-width314">
      			</td>
    			</tr>
    			<tr>
      			<td><label  class="ui-formDescription"><span class="fn-high">*</span>手输日期</label></td>
      			<td>
      			<input type="text" name="date" value="" class="ui-FormInputText ui-width314">
      			</td>
    			</tr>
    			<tr>
      			<td><label  class="ui-formDescription"><span class="fn-high">*</span> 数字</label></td>
      			<td>
      			<input type="text" name="number" value="" class="ui-FormInputText">
      			</td>
    			</tr>
  			</tbody>
  			</table>
        <div class="ui-normalBtnArea ui-current-1">
            <a class="ui-normalBtn ui-BGblue ui-largeBtn" href="javascript:;" id="save">保存</a>
        </div>
		</form>
	</script>


</body>
</html>
<!DOCTYPE html>
<html>
<head>
<title>证件校验</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="../lib/pretty/prettify.css" type="text/css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="../css/tablepay.css" media="all">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<link rel="stylesheet" type="text/css" href="../css/business.css">
</head>
<body id="main_body" onload="prettyPrint()" >
	
<div class="form_container">
    <table class="form_table" width="100%">
        <tbody>
            <tr>
                <td width="20%"><label class="formDescription"><span class="fn-high">*</span>证件类型：</label></td>
                <td>
                    <select id="J_certiType">
                        <option value="1001">身份证</option>
                        <option value="1002">护照号</option>
                        <option value="3001">客户手机号码</option>
                        <option value="4001">代客下单手机号码</option>
                        <option value="1004">员工手机号码</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label class="formDescription"><span class="fn-high">*</span>证件号码：</label></td>
                <td>
                    <input type="text" id="J_idCardNum" name="J_idCardNum" />
                    <label class="error" for="J_idCardNum"></label>
                </td>
            </tr>
        </tbody>
    </table>
	<pre class="prettyprint mg_t_20 fn-clear" id="html">
        html结构中必须存在的dom元素：
        1、选择证件类型select
            &lt;select id=&quot;J_certiType&quot;&gt;
                &lt;option value=&quot;1001&quot;&gt;身份证&lt;/option&gt;
                &lt;option value=&quot;1002&quot;&gt;护照号&lt;/option&gt;
                &lt;option value=&quot;3001&quot;&gt;客户手机号码&lt;/option&gt;
                &lt;option value=&quot;4001&quot;&gt;代客下单手机号码&lt;/option&gt;
                &lt;option value=&quot;1004&quot;&gt;员工手机号码&lt;/option&gt;
            &lt;/select&gt;
        2、填写证件号码input
            &lt;input type=&quot;text&quot; id=&quot;J_idCardNum&quot; name=&quot;J_idCardNum&quot; /&gt;

        插件会返回错误提示语，可在回调函数内自定义提示方式


        引入：certiVerify.js

        js代码：
        /*
        *   @param  {obj}  params   入参对象
        *   @param {jquery obj}    params.$certiType       证件类型select id
        *   @param {jquery obj}    params.$idCardNum       证件号码input id
        *   @param {function}    params.$blurCallback      选择证件类型select change回调函数
        *   @param {function}    params.$changeCallback    证件号码input blur回调函数
        */
        var params = {
            "$certiType": $('#J_certiType'),
            "$idCardNum": $('#J_idCardNum'),
            "changeCallback": function(){
                this.$idCardNum.val('');
                this.$idCardNum.next('label').text('');
            },
            "blurCallback": function(errorMsg){
                this.$idCardNum.next('label').text(errorMsg);
            }
        };
        certiVerify.init(params);
	</pre>
</div>


<script src="../lib/jquery/1.8.1/jquery.js"></script>
<script src="../lib/json2/1.0.0/json2.js"></script>
<script src="../lib/handlebars/1.3.0/handlebars.js"></script>
<script src="../lib/handlebars/1.3.0/helpers.js"></script>
<script src="../common/requirejsConfigObj.js"></script>
<script src="../lib/requirejs/2.1.17.js"></script>
<script src="../common/config.js"></script>
<script src="../common/common.js"></script>
<script src="../lib/pretty/prettify.js"></script>

<script src="./certiVerify.js"></script>
<script type="text/javascript">
$(function() {
    /*
    *   @param  {obj}  params   入参对象
    *   @param {jquery obj}    params.$certiType       证件类型select id
    *   @param {jquery obj}    params.$idCardNum       证件号码input id
    *   @param {function}    params.$blurCallback      选择证件类型select change回调函数
    *   @param {function}    params.$changeCallback    证件号码input blur回调函数
    */
    var params = {
        "$certiType": $('#J_certiType'),
        "$idCardNum": $('#J_idCardNum'),
        "changeCallback": function(){
            this.$idCardNum.val('');
            this.$idCardNum.next('label').text('');
        },
        "blurCallback": function(errorMsg){
            this.$idCardNum.next('label').text(errorMsg);
        }
    };
    certiVerify.init(params);
})
</script>
</body>
</html>